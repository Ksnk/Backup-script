# Backup для MySql

Скрипт предназначен для создания sql-dump'ов для MySql базы данных и для восстановления баз по существующим дампам. Скрипт может пользоваться дампами, созданными практически всеми программами работы с MySql. phpMyAdmin, SypexDumper, SQLYog...

Предназначен для работы в первую очередь на небольших ненагруженных проектах, так как на больших и нагруженных адиминистраторы должны и сами позаботится о создании резервных копий базы ;)
Тем не менее, скрипт тестировался на sql-дампе размером 300mb и gzip'е размером 150mb. Скоростные характеристики тоже вполне удовлетворительные.

## Требования

* PHP 5.2 +

* MySql  5+. За точность версии не уверен, но проверить на более старых версиях не имею возможности :(

* используемая в сборке ALLINONE библиотека jQuery подгружается с code.google.com.

## Скрипт выпускается в 2 вариантах сборок

*  ALLINONE - один файл php, который представляет собой независимое web приложение, который может быть загружено и исполнено на сервере.
*  CMS-PLUGIN - файл представляет отдельный класс, который можно использовать в собственном приложении. Примеры работы с классом можно подсмотреть в ALLINONE сборке.

Лицензирование этих сборок различно. ALLINONE выходит под GNU GPL лицензией, что, фактически, запрещает использовать его в коммерческих продуктах, однако его некоммерческое использование не ограничено, в то время как у CMS-PLUGIN - MIT лицензия, никаких ограничений на использование не накладывается.

[Благодарности](#thanks)

## Чем он лучше "всех остальных" (ALLINONE)

Некоторые отличия от известных мне "дамперов":

*   При создании дампа проверяется время изменения таблиц. Таким образом гарантируется корректный дамп при отсутствии блокировки базы. Тем самым, фактически, выполнение скрипта не сильно сказывается на производительности сервера.
*   Весь скрит занимает один файл и его удобнее доставить до "аварийного" места, чем более сложные утилиты
*   Скрипт может работать без права на запись в файловой системе сервера. Изготовленный дамп может быть отгружен непосредственно броузеру. Подгруженный файл будет обработан.

## Описание работы.

Если разместить скрипт на сервере и запустить его через адресную строку, появится панелька с 6-ю кнопками.

Каждая кнопка отвечает за одну из возможных выполняемых операций.

* загрузить файл на сервер и выполнить его. Нажав на кнопку "upload" вы выбираете файл и он сразу загружается на сервери начинает исполняться. Результат работы в виде лога выводится в специальное окошко.

* выполнить sql, введенный в textarea. Можно вставить sql в окно ввода текста. Нажав на кнопку этот sql быдет выполнен.

* выбрать загруженный файл. В панельке есть список файлов, загруженных на сервер. Если выбрать один их них и нажать на кнопку "Process" он будет выполнен

* восстановление, выгрузка файла. Производится изготовление sql-damp'а. полученный файл сразу, не сохраняясь на сервере будет загружен на компьютер пользователя.

* восстановление, сохранение файла. то же, что и выше, но файл будет сохранен на сервере. Выводится лог выполняемой операции

* настройки - список из пароля, имени, хоста и имени базы данных с которыми будет выполняться операция.

### Благодарности<a name="thanks"/>

*   форуму [Vingrad](http://forum.vingrad.ru), и всем принявшим участие в обсуждении проекта

Персонально, за помощь в создании и отладке:

* [krundez](https://github.com/krundetz)
* [solenko](http://forum.vingrad.ru/users/solenko)
* [Gold Dragon](http://forum.vingrad.ru/users/Gold%20Dragon)